商户订单页面 //请求商户的订单信息
菜品搜索  //搜索 加菜

4 菜品售罄图标显示   //根据菜品状态 调整UI
5 菜品售卖时间范围 

8 支付完成页面弹窗  //单独的红包限时逻辑  
9 首页跳转到点餐页逻辑 //根据页面路径自定义返回
登录页面逻辑完备性  //返回上一页面
13 用户钱包  //重新定义对象获取
14 菜品打包费相关   计算每个菜品打包费的价格  最终显示在购物车和订单列表页面
15 套餐在订单列表的显示逻辑

整个点餐逻辑梳理
14 扫描桌台
15 选择人数

多人点餐   
lodash工具库转换为本地代码  支付宝小程序不识别




后续加强
1 各个请求的模拟参数单独测试

外卖  不需要桌台
外带  不需要桌台
自提
堂食  扫码点餐桌台选择

正常需要选择 扫码点餐人数选择
添加必选菜


首页选择 自提 外卖 外带跳转过来的处理方式为什么可以不扫码直接下单 同时不带有tableId

人数选择
堂食扫码

tableId不存在则需要扫码

















价格计算逻辑
1 菜品总价  菜品的折扣价部分  菜品打包费部分 优惠小计
2 券包抵扣费用
3 支付页面
  饭票支付   菜品总价+打包费部分  已饭票折扣支付
  储值支付   菜品总价+打包费部分  储值金额支付
  红包/支付宝/微信支付  菜品总价-菜品的折扣价部分+菜品打包费部分 - (券包抵扣金额)
  会员支付  (以上处理部分)*折扣   (是否要考虑券包抵扣金额)


1 码牌支付
  饭票支付
    饭票合并支付
      第一次购买        直接支付并计算饭票余额
      已有余额合并支付   计算饭票最终余额
    饭票直接支付
      实时计算饭票余额  不断通过请求更新
  原价支付
  券包支付 
    券包合并支付
    单独券包抵扣支付


首页  显示各个商家下的饭票余额   点击购买饭票




支付
基础参数

1 打包费
2 组id
3 使用券包id



paidFee 支付金额


//是否已经选择饭票



1 显示与饭票,券包营销(输入金额才显示)
2 有饭票余额和券包  一直显示

2 饭票余额够
实付金额  没有划线

2 饭票余额不够  
  完全没有余额 输入金额 显示营销   显示饭票价 
  余额不够 默认选择第一条饭票    实付金额为购买饭票金额  计算饭票余额
  点击选择饭票(默认选择饭票)    实付金额显示  原价  预估饭票余额


已有券包(根据金额计算券包的显示逻辑)
券包营销   推荐券包不默认选择

1  券包支付明细





所有入口做登录页面的检查 


todo
直接支付页面 箭头确实图片
券包的选择需要处理 当切换支付方式之后的提示语,存在问题



测试样例

一 直接支付页面
1 不开启任何模式
  a 存在饭票余额显示饭票余额,支持饭票余额支付。金额栏显示实际支付饭票金额和预估饭票余额
  b 存在已有券包,显示已有券包 支持券包的切换并使用券包支付,金额栏显示实际支付价格和券包优惠
2 开启饭票营销
   当饭票余额不足或者没有余额时,输入金额时推荐可购买饭票,支付饭票的合并支付,并在金额栏显示实际支付金额和预估饭票余额
3 开启券包营销
   当用户没有该商户券包时,输入金额之后展示相关券包营销,支持券包合并支付,并在输入金额部分显示实际支付价格和券包价格,券包优惠的价格
4 支付成功
  支付成功之后跳转到订单页面
5 支付失败
  弹窗提示支付失败


二 首页
1 未登录
  显示登录按钮,必须登录才可进行其他内容显示
2 
